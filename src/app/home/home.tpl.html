<leaflet height="100%" width="100%" center="center" layers="layers" event-broadcast="events"></leaflet>
<div class="info_overlay">
  <tabset>
    <tab heading="Overview">
      <div class="info_container">
        <label class="info_label">Scenario Template</label>
        <select ui-select2   ng-model="current_template_index" class='template_select' ng-change='scenario_select()'>
       	  <option  ng-repeat="scenario in allScenarios" value="{{ $index }}" ng-selected="{{ $index*1 == current_template_index*1 }}">{{ scenario.name }},{{ $index }},{{current_template_index}}</option>
  		  </select> 
      <label class="info_label">Overview</label>
      <table class="table table-hover">
        <tr>
          <td>Trips Planned</td><td>{{ trip_table.length | number }}</td>
        </tr>
        <tr>
          <td>Number of Tracts </td><td>{{ tracts.length | number }}</td>
        </tr>
      </table>
     <label class="info_label">Census Data</label>
     <table class="table table-striped table-hover">
      <tr>
        <td> Total Population </td>
        <td ng-click="choropleth('total_population')"> {{ census_vars.total_population | number }} <i class="fa fa-bar-chart-o"></i> </td>
        <td> </td>
      </tr>
      <tr>
        <td colspan=3><center><strong>Journey to Work</strong></center> </td>
      <tr>
        <td> Total Travel to Work</td>
        <td ng-click="choropleth('travel_to_work_total')" > {{ census_vars.travel_to_work_total | number }} <i class="fa fa-bar-chart-o"></i> </td>
        <td> </td>
      </tr>
      <tr>
        <td> Drive to Work</td>
        <td ng-click="choropleth('car_to_work')" >  {{ census_vars.car_to_work | number }} <i class="fa fa-bar-chart-o"></i> </td>
        <td ng-click="choropleth('car_to_work','travel_to_work_total')" > {{ census_vars.car_to_work / census_vars.travel_to_work_total *100 | number }}% <i class="fa fa-bar-chart-o"></i></td>
      </tr>
      <tr>
        <td>  Bus to Work</td>
        <td ng-click="choropleth('bus_to_work')" >  {{ census_vars.bus_to_work | number }} <i class="fa fa-bar-chart-o"></i></td>
        <td ng-click="choropleth('bus_to_work','travel_to_work_total')" > {{ census_vars.bus_to_work / census_vars.travel_to_work_total *100 | number }}% <i class="fa fa-bar-chart-o"></i></td>
      </tr>
    </table>
    <table class="table table-hover">
        <tr ng-repeat="(name,value) in census_vars">
          <td>{{ name }}</td><td>{{ value | number }}</td>
        </tr>
      </table>
      </div>
    </tab>
    <tab heading="GTFS">
        <div class="info_container">
        Bus Routes
        </div>
    </tab>
    <tab heading="Trip Table">
      <div class="info_container">
        <select ui-select2   ng-model="model_type" class='template_select'>
          <option value="0" selected>LEHD Origin-Destination Employment Statistics</option>
          <option value="1">Atlantic City Survey</option>
        </select>
        <label class="info_label">Trips</label>
          <table class="table table-striped table-hover trip-display">
            <thead>
              <tr>
                <td>Id</td>
                <td >Time</td>
                <td colspan=2>From</td>
                <td colspan=2>To</td>
              </tr>
            </thead>
            <input type="text" ng-model="tt_search.from_geoid" placeholder="Search Origin FIPS" class="tt_search">
            <input type="text" ng-model="tt_search.to_geoid"  placeholder="Search Destination FIPS" class="tt_search">
            <tbody>
              <tr ng-repeat="trip in trip_table | filter: tt_search | startFrom:tt_currentPage*tt_pageSize | limitTo:tt_pageSize">
                <td>{{trip.id}}</td>
                <td>{{trip.time}}</td>
                <td>{{trip.from_coords}}</td><td>{{trip.from_geoid.substr(5,6)}}</td>
                <td>{{trip.to_coords}}</td><td>{{trip.from_geoid.substr(5,6)}}</td>
              </tr>
            </tbody>
          </table>
          <button ng-disabled="tt_currentPage == 0" ng-click="tt_currentPage=currentPage-1"><-</button>
            {{ tt_currentPage*tt_pageSize}} - {{ (tt_currentPage*tt_pageSize)+tt_pageSize }} of {{ tt_total }} <button class="btn-info rounded" ng-disabled="tt_currentPage >= tt_total/tt_pageSize - 1" ng-click="tt_currentPage=tt_currentPage+1"> -> </button>
      </div>
    </tab> 
  </tabset>
</div>